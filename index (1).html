<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time Garden - Evolve Your Habits into a Living Forest</title>
<style>
  body { font-family: sans-serif; margin: 0; padding: 0; background: #f0f8ff; transition: background 1s, color 0.5s; overflow-x:hidden; }
  .tab { display: none; padding: 20px; }
  .tabs button { margin: 5px; padding: 10px; cursor:pointer; }
  .garden { text-align: center; position: relative; }
  .tree { display: inline-block; margin: 10px; transition: transform 1s, color 1s; font-size:2rem; }
  .badge { display: inline-block; margin: 5px; padding: 5px; border: 1px solid green; }
  .overlay, .popup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); color:#fff; justify-content:center; align-items:center; flex-direction:column; z-index:1000; padding:20px; overflow:auto; }
  .overlay button, .popup button { margin-top:20px; padding:10px 15px; cursor:pointer; }
  .cookie-banner { position: fixed; bottom: 0; width: 100%; background: #222; color: #fff; padding: 10px; display:flex; justify-content: space-between; align-items:center; z-index:1001; }
  .cookie-banner button { background: #4CAF50; color: white; border: none; padding: 5px 10px; cursor:pointer; }
  .forestCanvas { border:1px solid #000; }
  .weather { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; }
  .cloud { position:absolute; background: white; border-radius:50%; opacity:0.8; animation: floatClouds linear infinite; }
  @keyframes floatClouds { from {transform: translateX(-200px);} to {transform: translateX(100vw);} }
  .raindrop { position:absolute; width:2px; height:10px; background: #0cf; animation: fall 1s linear infinite; }
  @keyframes fall { from {top:-10px;} to {top:100vh;} }
</style>
</head>
<body>

<div class="cookie-banner" id="cookieBanner">
  This website uses cookies for essential functionality and Google AdSense.
  <button onclick="acceptCookies()">Accept</button>
</div>

<div class="tabs">
  <button onclick="showTab('gardenTab')">ğŸŒ± Garden</button>
  <button onclick="showTab('habitsTab')">âœ… Habits</button>
  <button onclick="showTab('progressTab')">ğŸ“Š Progress</button>
  <button onclick="showTab('timerTab')">â³ Focus Timer</button>
  <button onclick="showTab('communityTab')">ğŸŒ Community</button>
  <button onclick="showTab('settingsTab')">âš™ï¸ Settings</button>
</div>

<div id="gardenTab" class="tab garden">
  <div id="weatherContainer" class="weather"></div>
</div>

<div id="habitsTab" class="tab">
  <input type="text" id="habitInput" placeholder="Add Habit">
  <button onclick="addHabit()">Add</button>
  <ul id="habitList"></ul>
  <button onclick="startRestSeason()">ğŸŒ™ Mind Reset / Rest Season</button>
</div>

<div id="progressTab" class="tab">
  <h3>Achievements</h3>
  <div id="achievements"></div>
  <h3>Yearly Forest</h3>
  <div id="yearlyForest"></div>
  <button onclick="downloadYearlyForest()">ğŸ“¸ Screenshot / Share</button>
</div>

<div id="timerTab" class="tab">
  <h3>Focus Timer (25 min Pomodoro)</h3>
  <button onclick="startTimer()">Start</button>
  <span id="timerDisplay">25:00</span>
</div>

<div id="communityTab" class="tab">
  <h3>Community Quotes Wall ğŸŒ</h3>
  <div id="quotesWall"></div>
  <button onclick="nextQuote()">Next Quote</button>
</div>

<div id="settingsTab" class="tab">
  <h3>Settings</h3>
  <label>Dark Mode: <input type="checkbox" onchange="toggleDarkMode(this.checked)"></label><br>
  <label>Pastel Mode: <input type="checkbox" onchange="togglePastelMode(this.checked)"></label>
</div>

<div id="overlay" class="overlay">
  <h2>ğŸ‰ Your Yearly Forest ğŸ‰</h2>
  <canvas id="forestCanvas" class="forestCanvas"></canvas>
  <button onclick="closeOverlay()">Close</button>
</div>

<div id="privacyPopup" class="popup">
  <h2>Privacy Policy</h2>
  <p>No personal information is collected. All data is stored locally in your browser.</p>
  <button onclick="closePopup('privacyPopup')">Close</button>
</div>
<div id="termsPopup" class="popup">
  <h2>Terms of Use</h2>
  <p>Do not use this website for harmful purposes. 13+ age required.</p>
  <button onclick="closePopup('termsPopup')">Close</button>
</div>
<div id="disclaimerPopup" class="popup">
  <h2>Disclaimer</h2>
  <p>This tool provides productivity and habit tracking. Not medical or psychological advice.</p>
  <button onclick="closePopup('disclaimerPopup')">Close</button>
</div>
<div id="dmcaPopup" class="popup">
  <h2>DMCA / Takedown Policy</h2>
  <p>If any copyrighted content appears, contact us to remove it immediately.</p>
  <button onclick="closePopup('dmcaPopup')">Close</button>
</div>

<script>
// Cookie Consent
function acceptCookies(){ document.getElementById('cookieBanner').style.display='none'; localStorage.setItem('cookiesAccepted','true'); }
if(localStorage.getItem('cookiesAccepted')){ document.getElementById('cookieBanner').style.display='none'; }

// Tabs
function showTab(tabId){ document.querySelectorAll('.tab').forEach(t=>t.style.display='none'); document.getElementById(tabId).style.display='block'; }
showTab('gardenTab');

// LocalStorage Habits
let habits = JSON.parse(localStorage.getItem('habits')||'[]');
function addHabit(){ let val = document.getElementById('habitInput').value.trim(); if(val){ habits.push({name:val, streak:0, level:0}); localStorage.setItem('habits',JSON.stringify(habits)); document.getElementById('habitInput').value=''; renderHabits(); renderGarden(); }}
function renderHabits(){ let html=''; habits.forEach((h,i)=>{ html+=`<li>${h.name} - Streak: ${h.streak} <button onclick='completeHabit(${i})'>Complete</button></li>`; }); document.getElementById('habitList').innerHTML=html; }

// Habit Tree Evolution + Weather + Rest Season + Animations + Animated Weather
let restSeason=false;
let mood='sunny';
function renderGarden(){
  let html='';
  document.getElementById('weatherContainer').innerHTML='';
  if(mood==='cloudy'){ for(let i=0;i<5;i++){ let cloud=document.createElement('div'); cloud.className='cloud'; cloud.style.width=50+Math.random()*50+'px'; cloud.style.height=30+Math.random()*20+'px'; cloud.style.top=Math.random()*50+'px'; cloud.style.left=Math.random()*100+'vw'; cloud.style.animationDuration=20+Math.random()*20+'s'; document.getElementById('weatherContainer').appendChild(cloud); } }
  if(mood==='rain'){ for(let i=0;i<100;i++){ let drop=document.createElement('div'); drop.className='raindrop'; drop.style.left=Math.random()*100+'vw'; drop.style.animationDuration=0.5+Math.random()+'s'; document.getElementById('weatherContainer').appendChild(drop); } }
  habits.forEach(h=>{
    let level = Math.min(h.streak,5);
    let tree='ğŸŒ±'; if(level>=1) tree='ğŸŒ¿'; if(level>=2) tree='ğŸŒ³'; if(level>=3) tree='ğŸŒ´'; if(level>=4) tree='ğŸ„'; if(level>=5) tree='ğŸŒŸ';
    let extras=''; if(level>=2) extras='ğŸŒ¸'; if(level>=3) extras+='ğŸ'; if(level>=4) extras+='ğŸ¦';
    html+=`<div class='tree' style='transform: scale(${1 + 0.1*level}); transition: transform 1s;'>${
